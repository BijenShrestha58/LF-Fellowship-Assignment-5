var m=(E,r)=>()=>(r||E((r={exports:{}}).exports,r),r.exports);var p=m(u=>{(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))O(t);new MutationObserver(t=>{for(const N of t)if(N.type==="childList")for(const D of N.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&O(D)}).observe(document,{childList:!0,subtree:!0});function g(t){const N={};return t.integrity&&(N.integrity=t.integrity),t.referrerPolicy&&(N.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?N.credentials="include":t.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function O(t){if(t.ep)return;t.ep=!0;const N=g(t);fetch(t.href,N)}})();Object.defineProperty(u,"__esModule",{value:!0});require("./style.css");var e=require("./constants"),l=require("./utils/common"),R=require("./classes/Player"),f=require("./classes/Obstacle"),d=require("./utils/collision"),s=document.querySelector("#canvas"),I=s.getContext("2d"),G=document.getElementById("player-image"),P=document.getElementById("obstacle1-image"),M=document.getElementById("background-image");s.width=e.DIMENSIONS.CANVAS_WIDTH;s.height=e.DIMENSIONS.CANVAS_HEIGHT;var L=new f.default(e.LANE_POSITION.LEFT_LANE,(0,l.getRandomInt)(e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*-2,0),e.PLAYER_DIMENSIONS.PLAYER_WIDTH,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT),y=new f.default(e.LANE_POSITION.MID_LANE,(0,l.getRandomInt)(e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*-7,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*-5),e.PLAYER_DIMENSIONS.PLAYER_WIDTH,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT),Y=new f.default(e.LANE_POSITION.RIGHT_LANE,(0,l.getRandomInt)(e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*-5,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*-3),e.PLAYER_DIMENSIONS.PLAYER_WIDTH,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT),H=[L,y,Y],S=new R.default(e.LANE_POSITION.MID_LANE,e.DIMENSIONS.CANVAS_HEIGHT-e.PLAYER_DIMENSIONS.PLAYER_HEIGHT-20,e.PLAYER_DIMENSIONS.PLAYER_WIDTH,e.PLAYER_DIMENSIONS.PLAYER_HEIGHT),A=S.x,a=0,c=localStorage.getItem("highScore")?parseInt(localStorage.getItem("highScore")):0,n=e.GAME_STATE.START,o=0,i=-e.DIMENSIONS.CANVAS_HEIGHT,T=e.SPEED;function C(){I.fillStyle="#000",I.fillRect(0,0,e.DIMENSIONS.CANVAS_WIDTH,e.DIMENSIONS.CANVAS_HEIGHT),I.fillStyle="#fff",I.font="30px Arial",I.textAlign="center",I.fillText("Press Enter to Start",e.DIMENSIONS.CANVAS_WIDTH/2,e.DIMENSIONS.CANVAS_HEIGHT/2),console.log("Displaying start screen"),requestAnimationFrame(_)}function h(){I.fillStyle="#000",I.fillRect(0,0,e.DIMENSIONS.CANVAS_WIDTH,e.DIMENSIONS.CANVAS_HEIGHT),I.fillStyle="#fff",I.font="30px Arial",I.textAlign="center",I.fillText("Game Over",e.DIMENSIONS.CANVAS_WIDTH/2,e.DIMENSIONS.CANVAS_HEIGHT/2-60),I.fillText("Score: ".concat(a),e.DIMENSIONS.CANVAS_WIDTH/2,e.DIMENSIONS.CANVAS_HEIGHT/2),I.fillText("High Score: ".concat(c),e.DIMENSIONS.CANVAS_WIDTH/2,e.DIMENSIONS.CANVAS_HEIGHT/2+30),I.fillText("Press Enter to Restart",e.DIMENSIONS.CANVAS_WIDTH/2,e.DIMENSIONS.CANVAS_HEIGHT/2+60),console.log("Displaying game over screen"),requestAnimationFrame(_)}function v(){if(I.clearRect(0,0,e.DIMENSIONS.CANVAS_WIDTH,e.DIMENSIONS.CANVAS_HEIGHT),o+=T/2,i+=T/2,o>=e.DIMENSIONS.CANVAS_HEIGHT&&(o=i-e.DIMENSIONS.CANVAS_HEIGHT),i>=e.DIMENSIONS.CANVAS_HEIGHT&&(i=o-e.DIMENSIONS.CANVAS_HEIGHT),I.drawImage(M,0,o,e.DIMENSIONS.CANVAS_WIDTH,e.DIMENSIONS.CANVAS_HEIGHT),I.drawImage(M,0,i,e.DIMENSIONS.CANVAS_WIDTH,e.DIMENSIONS.CANVAS_HEIGHT),I.strokeStyle="#fff",H.forEach(function(E){I.beginPath(),I.drawImage(P,E.x,E.y,E.w,E.h),E.y=E.y+T,E.y>e.DIMENSIONS.CANVAS_HEIGHT&&(E.y=(0,l.getRandomInt)(-1e3,-100),H.forEach(function(r){E!==r&&r.y-E.y<2*e.PLAYER_DIMENSIONS.PLAYER_HEIGHT&&(E.y-=2*e.PLAYER_DIMENSIONS.PLAYER_HEIGHT+50)}),a+=1,T=e.SPEED+Math.floor(a/10))}),S.x<A?S.x+=Math.min(e.SIDE_SPEED,A-S.x):S.x>A&&(S.x-=Math.min(e.SIDE_SPEED,S.x-A)),I.beginPath(),I.drawImage(G,S.x,S.y,S.w,S.h),(0,d.collisionDetection)(S,H)){n=e.GAME_STATE.END,console.log("Game Over!"),a>c&&(c=a,localStorage.setItem("highScore",c.toString()));return}I.fillStyle="#fff",I.font="20px Arial",I.fillText("Score: ".concat(a),60,20),I.fillText("High Score: ".concat(c),60,50),requestAnimationFrame(_)}function _(){switch(n){case e.GAME_STATE.START:C();break;case e.GAME_STATE.RUNNING:v();break;case e.GAME_STATE.END:h();break}}function V(){S.x=e.LANE_POSITION.MID_LANE,S.y=e.DIMENSIONS.CANVAS_HEIGHT-e.PLAYER_DIMENSIONS.PLAYER_HEIGHT-20,A=S.x,a=0,H.forEach(function(E,r){E.y=(0,l.getRandomInt)(-e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*(r*2+1),-e.PLAYER_DIMENSIONS.PLAYER_HEIGHT*r*2)}),console.log("Game reset")}window.addEventListener("keypress",function(E){switch(console.log("Key pressed: ".concat(E.key)),E.key){case"Enter":(n===e.GAME_STATE.START||n===e.GAME_STATE.END)&&(V(),n=e.GAME_STATE.RUNNING,console.log("Game state changed to RUNNING"),requestAnimationFrame(_));break;case"a":n===e.GAME_STATE.RUNNING&&A-e.DIFFERENCE>100&&(A-=e.DIFFERENCE);break;case"d":n===e.GAME_STATE.RUNNING&&A+e.DIFFERENCE<e.DIMENSIONS.CANVAS_WIDTH-100&&(A+=e.DIFFERENCE);break}});requestAnimationFrame(_)});export default p();
